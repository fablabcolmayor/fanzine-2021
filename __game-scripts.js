var KeyboardInput=pc.createScript("keyboardInput");KeyboardInput.prototype.initialize=function(){this.orbitCamera=this.entity.script.orbitCamera},KeyboardInput.prototype.postInitialize=function(){this.orbitCamera&&(this.startDistance=this.orbitCamera.distance,this.startYaw=this.orbitCamera.yaw,this.startPitch=this.orbitCamera.pitch,this.startPivotPosition=this.orbitCamera.pivotPoint.clone())},KeyboardInput.prototype.update=function(t){this.orbitCamera&&this.app.keyboard.wasPressed(pc.KEY_SPACE)&&(this.orbitCamera.reset(this.startYaw,this.startPitch,this.startDistance),this.orbitCamera.pivotPoint=this.startPivotPosition)};var MouseInput=pc.createScript("mouseInput");MouseInput.attributes.add("orbitSensitivity",{type:"number",default:.3,title:"Orbit Sensitivity",description:"How fast the camera moves around the orbit. Higher is faster"}),MouseInput.attributes.add("distanceSensitivity",{type:"number",default:.15,title:"Distance Sensitivity",description:"How fast the camera moves in and out. Higher is faster"}),MouseInput.prototype.initialize=function(){if(this.orbitCamera=this.entity.script.orbitCamera,this.orbitCamera){var t=this,onMouseOut=function(o){t.onMouseOut(o)};this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this),window.addEventListener("mouseout",onMouseOut,!1),this.on("destroy",(function(){this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.off(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this),window.removeEventListener("mouseout",onMouseOut,!1)}))}this.app.mouse.disableContextMenu(),this.lookButtonDown=!1,this.panButtonDown=!1,this.lastPoint=new pc.Vec2},MouseInput.fromWorldPoint=new pc.Vec3,MouseInput.toWorldPoint=new pc.Vec3,MouseInput.worldDiff=new pc.Vec3,MouseInput.prototype.pan=function(t){var o=MouseInput.fromWorldPoint,e=MouseInput.toWorldPoint,s=MouseInput.worldDiff,n=this.entity.camera,i=this.orbitCamera.distance;n.screenToWorld(t.x,t.y,i,o),n.screenToWorld(this.lastPoint.x,this.lastPoint.y,i,e),s.sub2(e,o),this.orbitCamera.pivotPoint.add(s)},MouseInput.prototype.onMouseDown=function(t){switch(t.button){case pc.MOUSEBUTTON_LEFT:this.lookButtonDown=!0,pc.app.css3Renderer&&pc.app.css3Renderer.blockEvents(!0);break;case pc.MOUSEBUTTON_MIDDLE:case pc.MOUSEBUTTON_RIGHT:this.panButtonDown=!0,pc.app.css3Renderer&&pc.app.css3Renderer.blockEvents(!0)}},MouseInput.prototype.onMouseUp=function(t){switch(t.button){case pc.MOUSEBUTTON_LEFT:this.lookButtonDown=!1,pc.app.css3Renderer&&pc.app.css3Renderer.blockEvents(!1);break;case pc.MOUSEBUTTON_MIDDLE:case pc.MOUSEBUTTON_RIGHT:this.panButtonDown=!1,pc.app.css3Renderer&&pc.app.css3Renderer.blockEvents(!1)}},MouseInput.prototype.onMouseMove=function(t){pc.app.mouse;this.lookButtonDown?(this.orbitCamera.pitch-=t.dy*this.orbitSensitivity,this.orbitCamera.yaw-=t.dx*this.orbitSensitivity):this.panButtonDown&&this.pan(t),this.lastPoint.set(t.x,t.y)},MouseInput.prototype.onMouseWheel=function(t){this.orbitCamera.distance-=t.wheel*this.distanceSensitivity*(.1*this.orbitCamera.distance),t.event.preventDefault()},MouseInput.prototype.onMouseOut=function(t){this.lookButtonDown=!1,this.panButtonDown=!1,pc.app.css3Renderer.blockEvents(!1)};var TouchInput=pc.createScript("touchInput");TouchInput.attributes.add("orbitSensitivity",{type:"number",default:.4,title:"Orbit Sensitivity",description:"How fast the camera moves around the orbit. Higher is faster"}),TouchInput.attributes.add("distanceSensitivity",{type:"number",default:.2,title:"Distance Sensitivity",description:"How fast the camera moves in and out. Higher is faster"}),TouchInput.prototype.initialize=function(){this.orbitCamera=this.entity.script.orbitCamera,this.lastTouchPoint=new pc.Vec2,this.lastPinchMidPoint=new pc.Vec2,this.lastPinchDistance=0,this.orbitCamera&&this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.on("destroy",(function(){this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)})))},TouchInput.prototype.getPinchDistance=function(t,i){var n=t.x-i.x,o=t.y-i.y;return Math.sqrt(n*n+o*o)},TouchInput.prototype.calcMidPoint=function(t,i,n){n.set(i.x-t.x,i.y-t.y),n.scale(.5),n.x+=t.x,n.y+=t.y},TouchInput.prototype.onTouchStartEndCancel=function(t){var i=t.touches;1==i.length?(this.lastTouchPoint.set(i[0].x,i[0].y),pc.app.css3Renderer&&pc.app.css3Renderer.blockEvents(!0)):2==i.length?(this.lastPinchDistance=this.getPinchDistance(i[0],i[1]),this.calcMidPoint(i[0],i[1],this.lastPinchMidPoint),pc.app.css3Renderer&&pc.app.css3Renderer.blockEvents(!0)):pc.app.css3Renderer&&pc.app.css3Renderer.blockEvents(!1)},TouchInput.fromWorldPoint=new pc.Vec3,TouchInput.toWorldPoint=new pc.Vec3,TouchInput.worldDiff=new pc.Vec3,TouchInput.prototype.pan=function(t){var i=TouchInput.fromWorldPoint,n=TouchInput.toWorldPoint,o=TouchInput.worldDiff,c=this.entity.camera,s=this.orbitCamera.distance;c.screenToWorld(t.x,t.y,s,i),c.screenToWorld(this.lastPinchMidPoint.x,this.lastPinchMidPoint.y,s,n),o.sub2(n,i),this.orbitCamera.pivotPoint.add(o)},TouchInput.pinchMidPoint=new pc.Vec2,TouchInput.prototype.onTouchMove=function(t){var i=TouchInput.pinchMidPoint,n=t.touches;if(1==n.length){var o=n[0];this.orbitCamera.pitch-=(o.y-this.lastTouchPoint.y)*this.orbitSensitivity,this.orbitCamera.yaw-=(o.x-this.lastTouchPoint.x)*this.orbitSensitivity,this.lastTouchPoint.set(o.x,o.y)}else if(2==n.length){var c=this.getPinchDistance(n[0],n[1]),s=c-this.lastPinchDistance;this.lastPinchDistance=c,this.orbitCamera.distance-=s*this.distanceSensitivity*.1*(.1*this.orbitCamera.distance),this.calcMidPoint(n[0],n[1],i),this.pan(i),this.lastPinchMidPoint.copy(i)}};var OrbitCamera=pc.createScript("orbitCamera");OrbitCamera.attributes.add("distanceMax",{type:"number",default:0,title:"Distance Max",description:"Setting this at 0 will give an infinite distance limit"}),OrbitCamera.attributes.add("distanceMin",{type:"number",default:0,title:"Distance Min"}),OrbitCamera.attributes.add("pitchAngleMax",{type:"number",default:90,title:"Pitch Angle Max (degrees)"}),OrbitCamera.attributes.add("pitchAngleMin",{type:"number",default:-90,title:"Pitch Angle Min (degrees)"}),OrbitCamera.attributes.add("inertiaFactor",{type:"number",default:0,title:"Inertia Factor",description:"Higher value means that the camera will continue moving after the user has stopped dragging. 0 is fully responsive."}),OrbitCamera.attributes.add("focusEntity",{type:"entity",title:"Focus Entity",description:"Entity for the camera to focus on. If blank, then the camera will use the whole scene"}),OrbitCamera.attributes.add("frameOnStart",{type:"boolean",default:!0,title:"Frame on Start",description:'Frames the entity or scene at the start of the application."'}),Object.defineProperty(OrbitCamera.prototype,"distance",{get:function(){return this._targetDistance},set:function(t){this._targetDistance=this._clampDistance(t)}}),Object.defineProperty(OrbitCamera.prototype,"pitch",{get:function(){return this._targetPitch},set:function(t){this._targetPitch=this._clampPitchAngle(t)}}),Object.defineProperty(OrbitCamera.prototype,"yaw",{get:function(){return this._targetYaw},set:function(t){this._targetYaw=t;var i=(this._targetYaw-this._yaw)%360;this._targetYaw=i>180?this._yaw-(360-i):i<-180?this._yaw+(360+i):this._yaw+i}}),Object.defineProperty(OrbitCamera.prototype,"pivotPoint",{get:function(){return this._pivotPoint},set:function(t){this._pivotPoint.copy(t)}}),OrbitCamera.prototype.focus=function(t){this._buildAabb(t,0);var i=this._modelsAabb.halfExtents,e=Math.max(i.x,Math.max(i.y,i.z));e/=Math.tan(.5*this.entity.camera.fov*pc.math.DEG_TO_RAD),e*=2,this.distance=e,this._removeInertia(),this._pivotPoint.copy(this._modelsAabb.center)},OrbitCamera.distanceBetween=new pc.Vec3,OrbitCamera.prototype.resetAndLookAtPoint=function(t,i){this.pivotPoint.copy(i),this.entity.setPosition(t),this.entity.lookAt(i);var e=OrbitCamera.distanceBetween;e.sub2(i,t),this.distance=e.length(),this.pivotPoint.copy(i);var a=this.entity.getRotation();this.yaw=this._calcYaw(a),this.pitch=this._calcPitch(a,this.yaw),this._removeInertia(),this._updatePosition()},OrbitCamera.prototype.resetAndLookAtEntity=function(t,i){this._buildAabb(i,0),this.resetAndLookAtPoint(t,this._modelsAabb.center)},OrbitCamera.prototype.reset=function(t,i,e){this.pitch=i,this.yaw=t,this.distance=e,this._removeInertia()},OrbitCamera.prototype.initialize=function(){var t=this,onWindowResize=function(){t._checkAspectRatio()};window.addEventListener("resize",onWindowResize,!1),this._checkAspectRatio(),this._modelsAabb=new pc.BoundingBox,this._buildAabb(this.focusEntity||this.app.root,0),this.entity.lookAt(this._modelsAabb.center),this._pivotPoint=new pc.Vec3,this._pivotPoint.copy(this._modelsAabb.center);var i=this.entity.getRotation();if(this._yaw=this._calcYaw(i),this._pitch=this._clampPitchAngle(this._calcPitch(i,this._yaw)),this.entity.setLocalEulerAngles(this._pitch,this._yaw,0),this._distance=0,this._targetYaw=this._yaw,this._targetPitch=this._pitch,this.frameOnStart)this.focus(this.focusEntity||this.app.root);else{var e=new pc.Vec3;e.sub2(this.entity.getPosition(),this._pivotPoint),this._distance=this._clampDistance(e.length())}this._targetDistance=this._distance,this.on("attr:distanceMin",(function(t,i){this._targetDistance=this._clampDistance(this._distance)})),this.on("attr:distanceMax",(function(t,i){this._targetDistance=this._clampDistance(this._distance)})),this.on("attr:pitchAngleMin",(function(t,i){this._targetPitch=this._clampPitchAngle(this._pitch)})),this.on("attr:pitchAngleMax",(function(t,i){this._targetPitch=this._clampPitchAngle(this._pitch)})),this.on("attr:focusEntity",(function(t,i){this.frameOnStart?this.focus(t||this.app.root):this.resetAndLookAtEntity(this.entity.getPosition(),t||this.app.root)})),this.on("attr:frameOnStart",(function(t,i){t&&this.focus(this.focusEntity||this.app.root)})),this.on("destroy",(function(){window.removeEventListener("resize",onWindowResize,!1)})),this.pause=!1,this.app.on("disableOrbitCamera",(function(t){this.pause!=t&&(t?(this.pause=!0,this.distanceBac=this._distance,this.yawBac=this._yaw,this.pitchBac=this._pitch):(this._targetDistance=this._distance=this.distanceBac,this._targetYaw=this._yaw=this.yawBac,this._targetPitch=this._pitch=this.pitchBac,this.pause=!1))}),this)},OrbitCamera.prototype.update=function(t){if(!this.pause){var i=0===this.inertiaFactor?1:Math.min(t/this.inertiaFactor,1);this._distance=pc.math.lerp(this._distance,this._targetDistance,i),this._yaw=pc.math.lerp(this._yaw,this._targetYaw,i),this._pitch=pc.math.lerp(this._pitch,this._targetPitch,i),this._updatePosition()}},OrbitCamera.prototype._updatePosition=function(){this.entity.setLocalPosition(0,0,0),this.entity.setLocalEulerAngles(this._pitch,this._yaw,0);var t=this.entity.getPosition();t.copy(this.entity.forward),t.scale(-this._distance),t.add(this.pivotPoint),this.entity.setPosition(t)},OrbitCamera.prototype._removeInertia=function(){this._yaw=this._targetYaw,this._pitch=this._targetPitch,this._distance=this._targetDistance},OrbitCamera.prototype._checkAspectRatio=function(){var t=this.app.graphicsDevice.height,i=this.app.graphicsDevice.width;this.entity.camera.horizontalFov=t>i},OrbitCamera.prototype._buildAabb=function(t,i){var e=0;if(t.model){var a=t.model.meshInstances;for(e=0;e<a.length;e++)0===i?this._modelsAabb.copy(a[e].aabb):this._modelsAabb.add(a[e].aabb),i+=1}for(e=0;e<t.children.length;++e)i+=this._buildAabb(t.children[e],i);return i},OrbitCamera.prototype._calcYaw=function(t){var i=new pc.Vec3;return t.transformVector(pc.Vec3.FORWARD,i),Math.atan2(-i.x,-i.z)*pc.math.RAD_TO_DEG},OrbitCamera.prototype._clampDistance=function(t){return this.distanceMax>0?pc.math.clamp(t,this.distanceMin,this.distanceMax):Math.max(t,this.distanceMin)},OrbitCamera.prototype._clampPitchAngle=function(t){return pc.math.clamp(t,-this.pitchAngleMax,-this.pitchAngleMin)},OrbitCamera.quatWithoutYaw=new pc.Quat,OrbitCamera.yawOffset=new pc.Quat,OrbitCamera.prototype._calcPitch=function(t,i){var e=OrbitCamera.quatWithoutYaw,a=OrbitCamera.yawOffset;a.setFromEulerAngles(0,-i,0),e.mul2(a,t);var s=new pc.Vec3;return e.transformVector(pc.Vec3.FORWARD,s),Math.atan2(s.y,-s.z)*pc.math.RAD_TO_DEG};var IframePlane=pc.createScript("iframePlane");IframePlane.attributes.add("iframeUrl",{type:"string"}),IframePlane.attributes.add("pixelsPerUnit",{type:"number",default:640,description:"Number of canvas pixels per unit of world space. The larger the number, the higher the resolution of the iframe."}),IframePlane.prototype.initialize=function(){var e;this.iframeUrl?((e=document.createElement("iframe")).src=this.iframeUrl,e.style.border="0px"):e=null,this._css3Plane=new pc.Css3Plane(e,this.entity,this.pixelsPerUnit);var t=new pc.StandardMaterial;t.depthWrite=!0,t.redWrite=!1,t.greenWrite=!1,t.blueWrite=!1,t.alphaWrite=!1,t.blendType=pc.BLEND_NONE,t.opacity=0,t.update(),this.entity.render.material=t,this.on("destroy",(function(){this._css3Plane.disable()}),this),this.on("enable",(function(){this._css3Plane.enable()}),this),this.on("disable",(function(){this._css3Plane.disable()}),this)};pc.extend(pc,function(){"use strict";var epsilon=function(e){return Math.abs(e)<1e-10?0:e},e=pc.Application.getApplication(),getCameraCSSMatrix=function(e){var t=e.data;return"matrix3d("+epsilon(t[0])+","+epsilon(-t[1])+","+epsilon(t[2])+","+epsilon(t[3])+","+epsilon(t[4])+","+epsilon(-t[5])+","+epsilon(t[6])+","+epsilon(t[7])+","+epsilon(t[8])+","+epsilon(-t[9])+","+epsilon(t[10])+","+epsilon(t[11])+","+epsilon(t[12])+","+epsilon(-t[13])+","+epsilon(t[14])+","+epsilon(t[15])+")"},Css3Renderer=function(){if(e.css3Renderer)return e.css3Renderer;e.css3Renderer=this,this._stageElement=null,this._cameras=[],this._cameraElements=[],this._defaultCameraElement=null,this._css3Targets=[],this._cameraInvertMat=new pc.Mat4,this._cameraHalfSize=new pc.Vec2;var t=document.createElement("div");t.style.overflow="hidden",t.style.pointerEvents="auto",document.body.appendChild(t);var s=e.touch;s&&s.attach(t),e.elementInput&&e.elementInput.attach(t);var i=document.getElementById("application-canvas");i.style.pointerEvents="none",document.body.insertBefore(t,i),this._stageElement=t,this._defaultCameraElement=this.addCamera(e.root.findComponent("camera"));var n=this;function onWindowResize(){n._width=window.innerWidth,n._height=window.innerHeight,n._widthHalf=n._width/2,n._heightHalf=n._height/2,n._stageElement.style.width=n._width+"px",n._stageElement.style.height=n._height+"px";for(var e=0;e<n._cameraElements.length;e++)n._cameraElements[e].style.width=n._width+"px",n._cameraElements[e].style.height=n._height+"px"}onWindowResize(),window.addEventListener("resize",onWindowResize,!1)};Css3Renderer.prototype={render:function(){this._isRendering||(this._isRendering=!0,e.on("update",this._renderElements,this))},cancelRender:function(){e.off("update",this._renderElements,this),this._isRendering=!1},addCamera:function(e){if(!e)return this._defaultCameraElement;if(this._cameras.indexOf(e)>-1)return this._cameraElements[this._cameras.indexOf(e)];var t=document.createElement("div");return t.style.WebkitTransformStyle="preserve-3d",t.style.transformStyle="preserve-3d",t.style.pointerEvents="none",this._stageElement.appendChild(t),this._cameras.push(e),this._cameraElements.push(t),t},addTarget:function(e){this._css3Targets.indexOf(e)<=-1&&this._css3Targets.push(e)},removeTarget:function(e){var t=this._css3Targets.indexOf(e);-1!==t&&this._css3Targets.splice(t,1)},blockEvents:function(e){for(var t=0;t<this._css3Targets.length;this._css3Targets[t++].blockEvents(e));},_renderElements:function(){for(var e=0;e<this._cameras.length;e++){var t,s,i,n=this._cameras[e],a=this._cameraElements[e],r=n.projectionMatrix.data[5]*this._heightHalf;n.projection==pc.PROJECTION_PERSPECTIVE?(this._stageElement.style.WebkitPerspective=r+"px",this._stageElement.style.perspective=r+"px"):(this._stageElement.style.WebkitPerspective="",this._stageElement.style.perspective=""),n.projection==pc.PROJECTION_ORTHOGRAPHIC&&(pc.Mat4._getPerspectiveHalfSize(this._cameraHalfSize,n.fov,n.aspectRatio,n.nearClip,n.horizontalFov),t=-(this._cameraHalfSize.x-this._cameraHalfSize.x)/2,s=(this._cameraHalfSize.y-this._cameraHalfSize.y)/2),this._cameraInvertMat.copy(n.entity.getWorldTransform()).invert(),i=(n.projection==pc.PROJECTION_ORTHOGRAPHIC?"scale("+r+")translate("+epsilon(t)+"px,"+epsilon(s)+"px)"+getCameraCSSMatrix(this._cameraInvertMat):"translateZ("+r+"px)"+getCameraCSSMatrix(this._cameraInvertMat))+"translate("+this._widthHalf+"px,"+this._heightHalf+"px)",a.style.WebkitTransform=i,a.style.transform=i}for(var h=0;h<this._css3Targets.length;this._css3Targets[h++].updateTransform());}};var Css3Plane=function(t,s,i,n){e.css3Renderer||(e.css3Renderer=new pc.Css3Renderer),this._renderer=e.css3Renderer,t||((t=document.createElement("div")).innerHTML="CSS3 Plane",t.style.backgroundColor="rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())+")",t.style.textAlign="center"),t.style.position="absolute",t.style.pointerEvents="auto",this.dom=t,s||(s=new pc.Entity,e.root.addChild(s)),this.entity=s,this.cameraElement=this._renderer.addCamera(n),this.cameraElement.appendChild(t),this._maxWidth=1920,this._maxHeight=1080,i=i||this._maxWidth,this.pixelsPerWorldUnit=new pc.Vec2(i,i),this._renderer.addTarget(this),this._renderer.render()};return Css3Plane.prototype={updateTransform:function(){var e,t,s,i=this.entity.getWorldTransform(),n=i.getScale(),a=Math.min(n.x*this.pixelsPerWorldUnit.x,this._maxWidth),r=Math.min(n.z*this.pixelsPerWorldUnit.y,this._maxHeight),h=(e=a,t=r,s=i.data,"translate(-50%,-50%)matrix3d("+epsilon(s[0]/e)+","+epsilon(s[1]/e)+","+epsilon(s[2]/e)+","+epsilon(s[3]/e)+","+epsilon(s[8]/t)+","+epsilon(s[9]/t)+","+epsilon(s[10]/t)+","+epsilon(s[11]/t)+","+epsilon(s[4])+","+epsilon(s[5])+","+epsilon(s[6])+","+epsilon(s[7])+","+epsilon(s[12])+","+epsilon(s[13])+","+epsilon(s[14])+","+epsilon(s[15])+")");this.dom.style.width=Math.round(a)+"px",this.dom.style.height=Math.round(r)+"px",this.dom.style.lineHeight=this.dom.style.height,this.dom.style.WebkitTransform=h,this.dom.style.transform=h},blockEvents:function(e){this.dom.style.pointerEvents=e?"none":"auto"},attachPlane:function(e){this.entity=e},disable:function(){this.cameraElement.removeChild(this.dom),this._renderer.removeTarget(this)},enable:function(){this.cameraElement.appendChild(this.dom),this._renderer.addTarget(this)}},{Css3Renderer:Css3Renderer,Css3Plane:Css3Plane}}());var YoutubePlane=pc.createScript("youtubePlane");function onYouTubeIframeAPIReady(){window.youTubeReady=!0}if(YoutubePlane.attributes.add("videoId",{type:"string"}),YoutubePlane.attributes.add("pixelsPerUnit",{type:"number",default:640,description:"Number of canvas pixels per unit of world space. The larger the number, the higher the resolution of the iframe."}),window.youTubeReady=!1,window.document){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}YoutubePlane.prototype.initialize=function(){this._createdPlane=!1},YoutubePlane.prototype.update=function(e){window.YT&&window.YT.loaded&&!this._createdPlane&&(this.onYoutubeApiReady(),this._createdPlane=!0)},YoutubePlane.prototype.onYoutubeApiReady=function(){var e=this,t=null,i=document.createElement("div");(i.id=this.entity.getGuid(),i.style.border="0px",this.videoId&&((t=document.createElement("div")).style.border="0px",t.appendChild(i)),this._css3Plane=new pc.Css3Plane(t,this.entity,this.pixelsPerUnit),this.videoId)&&(this._player=new YT.Player(this.entity.getGuid(),{height:"100%",width:"100%",events:{onReady:function(){e.entity.fire("youtubeready",e._player)}}}),document.getElementById(e.entity.getGuid()).src="https://www.youtube.com/embed/"+this.videoId+"?enablejsapi=1&controls=0&playsinline=1&origin="+encodeURI(window.location.origin));var n=new pc.StandardMaterial;n.depthWrite=!0,n.redWrite=!1,n.greenWrite=!1,n.blueWrite=!1,n.alphaWrite=!1,n.blendType=pc.BLEND_NONE,n.opacity=0,n.update(),this.entity.render.material=n,this.on("destroy",(function(){this._css3Plane.disable()}),this),this.on("enable",(function(){this._css3Plane.enable()}),this),this.on("disable",(function(){this._css3Plane.disable()}),this)};var YoutubeExternalControls=pc.createScript("youtubeExternalControls");YoutubeExternalControls.attributes.add("youTubePlane",{type:"entity"}),YoutubeExternalControls.attributes.add("playPauseButton",{type:"entity"}),YoutubeExternalControls.attributes.add("stopButton",{type:"entity"}),YoutubeExternalControls.attributes.add("seekForwardButton",{type:"entity"}),YoutubeExternalControls.attributes.add("seekBackButton",{type:"entity"}),YoutubeExternalControls.attributes.add("pauseIconAsset",{type:"asset",assetType:"texture"}),YoutubeExternalControls.attributes.add("playIconAsset",{type:"asset",assetType:"texture"}),YoutubeExternalControls.attributes.add("seekAmountSecs",{type:"number"}),YoutubeExternalControls.prototype.initialize=function(){this.youTubePlane.on("youtubeready",this._onYouTubePlaneReady,this),this.on("destroy",(function(){this.youTubePlane.off("youtubeready",this._onYouTubePlaneReady,this)}),this),this.playPauseButton.button.on("click",(function(){1===this._player.getPlayerState()||3===this._player.getPlayerState()?this._player.pauseVideo():this._player.playVideo()}),this),this.stopButton.button.on("click",(function(){this._player.stopVideo()}),this),this.seekForwardButton.button.on("click",(function(){var t=this._player.getCurrentTime();t+=this.seekAmountSecs,this._player.seekTo(t)}),this),this.seekBackButton.button.on("click",(function(){var t=this._player.getCurrentTime();t-=this.seekAmountSecs,this._player.seekTo(t)}),this),this._setButtonState(!1),this._playPauseButtonIcon=this.playPauseButton.findByName("Icon").element},YoutubeExternalControls.prototype.update=function(t){this._player&&(1===this._player.getPlayerState()||3===this._player.getPlayerState()?this._playPauseButtonIcon.texture=this.pauseIconAsset.resource:this._playPauseButtonIcon.texture=this.playIconAsset.resource)},YoutubeExternalControls.prototype._onYouTubePlaneReady=function(t){this._player=t,this._setButtonState(!0)},YoutubeExternalControls.prototype._setButtonState=function(t){this.playPauseButton.button.active=t,this.stopButton.button.active=t,this.seekForwardButton.button.active=t,this.seekBackButton.button.active=t};var Mouse=pc.createScript("mouse");Mouse.prototype.initialize=function(){this.app.mouse.disableContextMenu()};